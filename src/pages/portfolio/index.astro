---
import Breadcrumb from 'src/components/Breadcrumb.astro'
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro'
import { Image } from 'astro:assets'

const links = [{ label: 'Portfolio' }]

const portfolio = await getCollection('portfolio')

const groupedItems = Object.groupBy(portfolio, x => x.data.category)

---

<Layout title="Portfolio">
  <div class="p-10">
    <Breadcrumb links={links} />

    <h2 class="mb-8 text-3xl font-bold">Portfolio</h2>
    {
      <pre>
        { [ 'All', ...Object.keys(groupedItems) ] }

        </pre>
    }
    <div class="grid md:grid-cols-3 gap-10 *:hover:fill-black/10 *:hover:opacity-50 *:hover:grayscale">
      {
        portfolio.map((a) => (
          <a href={`/portfolio/${a.id}`} class="group grid aspect-[1/1.2] overflow-hidden border border-gray-200 *:col-span-full *:row-span-full hover:!border-gray-400 hover:!opacity-100 hover:!grayscale-0" data-astro-prefetch>
            <Image  src={a.data.image} alt={a.data.title} class="aspect-[1/1.2] w-full object-cover transition group-hover:scale-110" />
          </a>
        ))
      }
    </div>
  </div>
</Layout>
